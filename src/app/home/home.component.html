<div class="dashboard-container" [class.sidebar-collapsed]="isCollapsed">
  <!-- ===== SIDEBAR ===== -->
  <aside class="sidebar">
    <div class="sidebar-header">
      <button class="collapse-btn" (click)="toggleSidebar()">
        <i
          class="fa-solid"
          [ngClass]="isCollapsed ? 'fa-chevron-right' : 'fa-chevron-left'"
        ></i>
      </button>
    </div>

    <!-- ===== MENU ===== -->
    <div class="menu-items">
      <ng-container *ngFor="let m of menu">
        <div class="menu-item">
          <!-- MENU COM SUBITENS -->
          <div *ngIf="m.subMenus?.length; else single">
            <div
              class="menu-link"
              (click)="toggleMenu(m.id)"
              [class.active]="openedMenu === m.id"
            >
              <i class="fa-solid fa-folder"></i>
              <span *ngIf="!isCollapsed">{{ m.descricao }}</span>
              <i
                *ngIf="!isCollapsed"
                class="fa-solid ms-auto"
                [class.rotate]="openedMenu === m.id"
              ></i>
            </div>

            <div
              class="submenu"
              *ngIf="openedMenu === m.id && !isCollapsed"
              [@expandCollapse]
            >
              <a
                *ngFor="let sub of m.subMenus"
                [routerLink]="[sub.endereco]"
                routerLinkActive="active"
                class="submenu-link"
              >
                {{ sub.descricao }}
              </a>
            </div>
          </div>

          <!-- MENU SIMPLES -->
          <ng-template #single>
            <a
              [routerLink]="[m.endereco]"
              routerLinkActive="active"
              class="menu-link"
            >
              <i class="fa-solid fa-circle"></i>
              <span *ngIf="!isCollapsed">{{ m.descricao }}</span>
            </a>
          </ng-template>
        </div>
      </ng-container>
    </div>

    <!-- ===== RODAPÉ ===== -->
    <div class="sidebar-footer">
      <a class="menu-link" (click)="logout()">
        <i class="fa-solid fa-right-from-bracket"></i>
        <span *ngIf="!isCollapsed">Sair</span>
      </a>
    </div>
  </aside>

  <!-- ===== CONTEÚDO PRINCIPAL ===== -->
  <main class="main-content">
    <app-navbar></app-navbar>
    <div class="content-body p-3 mt-5">
      <router-outlet></router-outlet>
    </div>
  </main>
</div>
